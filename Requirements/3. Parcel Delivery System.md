# Parcel Delivery API

### **ğŸ¯ Project Overview**

Design and build a **secure, modular, and role-based backend API** for a parcel delivery system (inspired by Pathao Courier or Sundarban) using **Express.js** and **Mongoose**.

Your task is to implement a system where users can register as senders or receivers and perform parcel delivery operations such as **create parcel**, **track status**, and **cancel or receive parcels**.

You must implement:

- ğŸ” Authentication
- ğŸ­ Role-based Authorization (`admin`, `sender`, `receiver`)
- ğŸ§± Parcel and Status Management (status history embedded inside parcel model)
- ğŸ“¦ Modular Code Architecture
- ğŸ§± Transactional Logic
- ğŸ” Proper API Endpoints

While the **system design is up to you**, the implementation **must include the following minimum requirements**.

---

### **ğŸ“Œ Minimum Functional Requirements**

- âœ… JWT-based login system with three roles: `admin`, `sender`, `receiver`
- âœ… Passwords must be securely hashed (using bcrypt or appropriate method)
- âœ… Senders can:
    - Create parcel delivery requests
    - Cancel parcel (if not dispatched)
    - View all their parcels and status logs
- âœ… Receivers can:
    - View incoming parcels
    - Confirm parcel delivery
    - Delivery history
- âœ… Admins can:
    - View and manage all users and parcels
    - Block or unblock users or parcels
    - Update delivery statuses or assign delivery personnel (optional)
- âœ… All parcels and their status changes must be **stored and trackable**
- âœ… Role-based route protection must be implemented

---

### **ğŸ·ï¸ You Must Decide**

This project encourages **design thinking**. You must decide and implement:

- How and when a **parcel is created and dispatched**?
- What fields and schema structure each parcel should have (include status log inside parcel schema)?
- Whether a parcel can be **flagged or held**?
- What fields are necessary for a **parcel** and a **status log (as subdocument inside parcel)**?
- How to handle **status changes** (e.g., Requested â†’ Picked â†’ In Transit â†’ Delivered)?
- How sender/receiver/admin interact with **parcel records**?
- Whether **delivery agents or hubs** are involved (optional)?

---

### **ğŸ“¦ Parcel Logic**

- When and how is a **parcel created**?
    - By sender only?
    - or by Admin?
- What are required fields for a parcel?
    - e.g., type, weight, sender/receiver info, address, fee, delivery date, status logs, etc.
- Can a parcel be **canceled**, **blocked**, **returned**, or **rescheduled**?
- What are the **valid parcel status**
    - Requested â†’ Approved â†’ Dispatched â†’ In Transit â†’ Delivered (you decide)
- Can a user **delete** a parcel?
- Should each parcel have a **unique tracking ID**?
    - Format: `TRK-YYYYMMDD-xxxxxx`?
    - Include: trackingEvents[]: Array of status logs (location + timestamp + status + note)?
- How are **fees calculated**? (Optional)
    - Based on weight, distance, or flat rate?

---

### **ğŸ” Status & Tracking Design**

- What fields are required in a **status log** (as part of the parcel model)?
    - e.g., status, timestamp, updatedBy (admin/system)
- How to **track parcel history** by sender or receiver?
- Will you allow **search/filter by status or delivery time**?
- Should tracking info be public (e.g., via tracking ID)? (optional)

> ğŸ›  Note: Status log must be stored as an array of objects inside the parcel document (subdocument pattern). No need to build a separate statusLog module.
> 

---

### **ğŸ«† Validations & Business Rules**

- Can a sender cancel a **dispatched parcel**?
- Can a receiver mark a parcel as **delivered** themselves?
- Can blocked users **access features**?
- What validations will you enforce?
    - e.g., user role checks, parcel ownership, delivery status flow

---

### **ğŸ“œ Access & Visibility**

- Who can view:
    - All parcels?
    - Specific parcel status?
    - Delivery logs?
- Can a sender see only their parcels?
- Can a receiver see parcels being delivered to them?
- Can admins access all records with filters?

---

### **ğŸ” Role-Based Control**

- Which endpoints are:
    - **Sender-only**?
    - **Receiver-only**?
    - **Admin-only**?
    - **Public or shared**?
- How will you **authorize** each request based on role?

---

### **ğŸ§© API Design**

- Which API endpoints will you build?
    - RESTful resource naming preferred
    - e.g., `POST /parcels`, `GET /parcels/me`, `PATCH /parcels/cancel/:id`, `GET /parcels/:id/status-log`
- Will you include:
    - **Tracking ID system**?
    - **Status log history embedded and returned via parcel details?**
- How will you handle:
    - Error responses
    - Status codes
    - Success feedback

---

### **ğŸ§  Optional (Bonus Considerations)**

- Will you implement:
    - **Tracking system with tracking ID lookup?**
    - **Fee calculation based on parcel weight or location?**
    - **Special discount using coupon?**
    - **Admin dashboard support (via API)?**

---

### **ğŸ“ Suggested Project Structure**

```bash
bash
CopyEdit
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ parcel/   # Parcel module includes status log handling internally
â”œâ”€â”€ middlewares/
â”œâ”€â”€ config/
â”œâ”€â”€ utils/
â”œâ”€â”€ app.ts

```

---

### **ğŸ§ª Testing & Documentation**

- âœ… Use **Postman** to test and document your endpoints
- âœ… Submit a professional README.md with:
    - Project overview
    - Setup and environment instructions
    - A summary of all implemented endpoints
- âœ… Submit a **5â€“10 minute screen-recorded video** demonstrating:
    - **Intro (30s)** â€“ Name + Project title + What it does
    - **Folder Structure (1 min)** â€“ Show `src/`, explain main modules
    - **Authentication/Authorization Flow (1 min)** â€“ Register, Login, show JWT + roles
    - **Sender Features (1 mins)** â€“ Parcel creation, cancel, list, status
    - **Receiver Features (1 mins)** â€“ Track parcel, confirm delivery
    - **Admin Features (1 mins)** â€“ View all, block users, update status
    - **API Testing (3â€“4 mins)** â€“ Show Postman collection working
    - **Ending (30s)** â€“ Mention README, deployment, say thanks

---

### **ğŸ“Š Evaluation Rubric (Total: 60 Marks)**

| **Criteria** | **Marks** |
| --- | --- |
| ğŸ” Authentication (JWT + bcrypt) | 5 |
| ğŸ”’ Role-Based Authorization Middleware | 5 |
| ğŸ§ Sender/Receiver Logic + Schema Design + Validation | 10 |
| ğŸ“¦ Parcel & Status Design + Validations | 10 |
| ğŸ” Status History, Tracking + Filtering (inside parcel schema) | 10 |
| ğŸ§± Code Structure + Error Handling | 5 |
| ğŸ§  Creativity + Thoughtful Design | 5 |
| ğŸ“„ README + ğŸ” API Testing + ğŸ¥ Video | 10 |
| **Total** | **60** |
