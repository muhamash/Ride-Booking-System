# Digital Wallet API

### **ğŸ¯ Project Overview**

Design and build a **secure, modular, and role-based backend API** for a digital wallet system (similar to Bkash or Nagad) using **Express.js** and **Mongoose**.

Your task is to implement a system where users can register, manage wallets, and perform core financial operations such as **add money**, **withdraw**, and **send money**.

You must implement:

- ğŸ” Authentication
- ğŸ­ Role-based Authorization
- ğŸ¦ Wallet Management Logic
- ğŸ§± Transactional Logic
- ğŸ“¦ Modular Code Architecture
- ğŸ” Proper API Endpoints

While the **system design is up to you**, the implementation **must include the following minimum requirements**.

---

### **ğŸ“Œ Minimum Functional Requirements**

- âœ… JWT-based login system with three roles: `admin`, `user`, `agent`
- âœ… Secure password hashing (using bcrypt or other appropiate way)
- âœ… Each user and agent must have a wallet automatically created at registration (e.g., initial balance: à§³50)
- âœ… Users should be able to:
    - Add money (top-up)
    - Withdraw money
    - Send money to another user
    - View transaction history
- âœ… Agents should be able to:
    - Add money to any user's wallet (cash-in)
    - Withdraw money from any user's wallet (cash-out)
    - View their commission history (optional)
- âœ… Admins should be able to:
    - View all users, agents, wallets and transactions
    - Block/unblock user wallets
    - Approve/suspend agents
    - Set system parameters (e.g., transaction fees) (optional)
- âœ… All transactions must be **stored and trackable**
- âœ… Role-based route protection must be implemented

---

### **ğŸ§  Design Thinking Guide**

*Consider these questions carefully before implementation. They will shape your system architecture and logic.*

### **ğŸ¦ Wallet Creation & Management**

- How will wallets be created?
    - Automatically during registration?
    - Via a separate endpoint?
- What happens during registration?
    - Will users and agents get wallets?
    - What initial balance will users/agents have?
- Can users deactivate wallets?
    - Or can only admins block/unblock?
- What happens when a wallet is blocked?
    - Can it perform any operation?

---

### **ğŸ” Transaction Management**

- What fields are essential?
    - type? amount? fee? commission?
    - How will you track who initiated it (user or agent)?
- How will you handle transaction status?
    - pending â†’ completed â†’ reversed?
- What about atomic operations?
    - How will you ensure balance updates and transaction records sync perfectly?

---

### **ğŸ‘¥ Role Representation**

- How will you distinguish between users, agents, and admins?
    - Single User model with a role field?
    - Separate models for all roles with shared authentication?
- What unique fields does each need? (optional)
    - Agents: commission rate? approval status?
    - Admins: permission levels?
- How will agent approval work? (optional)
    - Will agent approval be automatic or admin-controlled? (optional)

---

### **ğŸ«† Validations & Business Rules**

- What validations will you enforce?
    - e.g., **insufficient balance**, **non-existent receiver**, **negative amounts**
- Can a user **send/withdraw** from a blocked wallet?
- Can agents perform cash-in/out for blocked user wallets? What should happen if attempted?
- Will there be **minimum balance** requirements?

---

### **ğŸ“œ Access & Visibility**

- How will users/agents access their **wallet and transaction history**?
    - Pagination? Sorting?
- Can a user view **other usersâ€™ wallets or history**? (Why/Why not?)
- What can **admins** see?
    - All wallets?
    - All users/agents?
    - All transactions?

---

### **ğŸ” Role-Based Control**

- Which endpoints are **restricted to admin only**?
- Which endpoints are **restricted to user only**?
- Which endpoints **can be accessed by both**?
- How is **authorization** enforced on each route?

---

### **ğŸ§© API Design**

- Which API endpoints will you build?
    - Think in terms of **RESTful resource design**
    - e.g., POST /wallets/deposit, GET /transactions/me, PATCH /wallets/block/:id
- Will you follow **REST conventions** or introduce custom routes?
- How will you handle **error responses**, success messages, and status codes?

---

### **ğŸ§  Optional (Bonus Considerations)**

- Will you implement:
    - **Transaction fee system /** agent commissions**?**
    - **Daily/monthly limits or caps?**
    - **Notification system (console-based or webhook stub)?**
    - **Agent-based cash-in/cash-out support?**

---

> âš ï¸Â **Note:**Use this section as your **thinking compass** before you begin implementation.
> 

---

### **ğŸ“ Suggested Project Structure**

You are encouraged to follow a **modular architecture** for clarity and scalability:

```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ wallet/
â”‚   â””â”€â”€ transaction/
â”œâ”€â”€ middlewares/
â”œâ”€â”€ config/
â”œâ”€â”€ utils/
â”œâ”€â”€ app.ts
```

Feel free to expand or adjust modules as necessary.

---

### **ğŸ§ª Testing & Documentation**

- âœ… Use **Postman** to test and document your endpoints
- âœ… Submit a professional README.md with:
    - Project overview
    - Setup and environment instructions
    - A summary of all implemented endpoints
- âœ… Submit a **5â€“10 minute screen-recorded video** demonstrating (Max 10 mins):
    - **Intro (30s)** â€“ Name + Project title + What it does
    - **Folder Structure (1 min)** â€“ Show src/, explain main folders
    - **Authentication/Authorization Flow (1 min)** â€“ Register, Login, show JWT + roles
    - **User Features (1 min)** â€“ Add money, withdraw, send money, view balance/history
    - **Agent Features (1 min)** â€“ Cash-in, cash-out, (optional) view commission
    - **Admin Features (1 min)** â€“ View users, block/unblock wallets, approve/suspend agents
    - **API Testing via Postman (3â€“4 mins)** â€“ Demonstrate key endpoints with test data
    - **Ending (30s)** â€“ Mention README, testing coverage, say thanks

---

### **ğŸ“Š Evaluation Rubric (Total: 60 Marks)**

| **Criteria** | **Marks** |
| --- | --- |
| ğŸ” Authentication (JWT + bcrypt) | 5 |
| ğŸ”’ Role-Based Authorization Middleware | 5 |
| ğŸ‘¤ User/Agent/Admin Logic + Schema Design + Validation   | 10 |
| ğŸ’° Wallet Logic + Schema Design + Validation | 10 |
| ğŸ” Transaction Logic + Schema Design + Validation | 10 |
| ğŸ§± Code Structure + Error Handling | 5 |
| ğŸ§  Creativity + Thoughtful Architecture | 5 |
| ğŸ“„ README + ğŸ” API Testing + ğŸ¥ Video | 10 |
| **Total** | **60** |
